---
description: >-
  Cuando obtenemos una reverse shell a través de Linux es importante hacer un
  tratamiento a la consola para que sea más cómoda de manejar.
---

# Tratamiento de la tty

En primer lugar es interesante que comencemos realizando la escucha con la herramienta rlwrap

```
sudo rlwrap nc -nlvp 443
```

A continuación cargamos una pseudoconsola, 2 posibles métodos:

```
script /dev/null -c bash #1 opción
python -c 'import pty;pty.spawn("/bin/bash")' #2 opción
```

Pulsamos Ctrl+Z para dejar en segundo plano la shell e introducimos lo siguiente:

```
stty raw -echo; fg
reset
xterm
```

Una vez recuperada nuestra shell nos queda cambiar las variables de entorno:

```
export TERM=xterm
export SHELL=bash
```

En otra consola distinta en nuestro pc ponemos los siguiente:

```
stty -a

speed 38400 baud; rows 51; columns 187; line = 0;
```

y usamos el rango de rows y columns que nos da en la shell:

```
stty rows 51 columns 187
```



> \*Disclaimer: Este manual está realizado en base a lo que voy aprendiendo, si parte de la información que comparto no es correcta estaré encantado de que te pongas en contacto conmigo para hacérmelo saber y poder modificarlo.
