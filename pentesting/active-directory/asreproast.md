---
description: Usuarios con la Flag DONT_REQUIRE_PREAUTH en true.
---

# ASRepRoast

Los usuarios necesitan una pre-autenticación kerberos, esto implica que se envía un AS-REQ al KDC del Controlador de Dominio que responde con un AS-REP que nos devuelve una respuesta con los datos cifrados con la clave Kerberos del usuario.

Cuando algún usuario tiene establecida en "True" la flag DONT\_REQUIREPREAUTH podemos suplantar esas cuentas y conseguir un hash que aunque no podamos utilizar para realizar PassTheHash si que podemos usarlo para crackearlo de forma offline.

La idea de este ataque es que previamente hayamos enumerado usuarios del dominio y tengamos un listado de estos, a continuación hay varias herramientas que podemos utilizar para lanzar el ataque. En Linux la más conocida sería la que viene con Impacket.

```
impacket-GetNPUsers

#Ejemplo de uso
impacket-GetNPUsers htb.local/ -no-pass -usersfile users -outputfile asrephash
```

Una vez realizado el ataque si algún usuario es _ASReprosteable_ obtendremos un hash que podemos crackear con la [herramienta que queramos.](../../herramientas/fuerza-bruta/)



## Practicar

* Máquina "Forest" HTB \[Acceso 15/02/2022]

> \*Disclaimer: Este manual está realizado en base a lo que voy aprendiendo, si parte de la información que comparto no es correcta estaré encantado de que te pongas en contacto conmigo para hacérmelo saber y poder modificarlo.
